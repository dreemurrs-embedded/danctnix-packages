# Maintainer: Danct12 <danct12@disroot.org>
pkgname=postprocessd
pkgver=0.4.0_git20250630
pkgrel=1
_commit=d97a24ddfa58764a9d131a4b5ea790a86e35f51f
pkgdesc="A native postprocessing pipeline for Megapixels"
url="https://git.sr.ht/~martijnbraam/postprocessd"
license=('GPL')
arch=('x86_64' 'armv7h' 'aarch64')
depends=('lensfun' 'libraw' 'libtiff4' 'libjpeg-turbo' 'libexif' 'opencv')
makedepends=('scdoc' 'meson' 'ninja')
source=("$pkgname-$_commit.tar.gz::https://gitlab.com/megapixels-org/postprocessd/-/archive/$_commit/postprocessd-$_commit.tar.gz")
sha512sums=('c241bce2139e6c61621700dcfdaef32a0d027f44fa2ef0bd9f4782a20c1db8f7881059f86c7da2454d0885322085d5c132c051cc9c49639bb5f4440e9b580948')

build() {
    arch-meson $pkgname-$_commit build
    ninja -C build
}

package() {
    DESTDIR="$pkgdir" ninja -C build install
}
